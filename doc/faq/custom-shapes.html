<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Title -->
  <title>Create custom shapes in diagrams.net using the text editor</title>

  <!-- Required Meta Tags Always Come First -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Google Fonts -->
  <link href="//fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
  <link href="//fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet"

  <!-- CSS Implementing Plugins -->
  <link rel="stylesheet" href="/assets/css/fontawesome-all.min.css">
  <link rel="stylesheet" href="/assets/css/animate.min.css">
  <link rel="stylesheet" href="/assets/css/hs.megamenu.css">
  <link rel="stylesheet" href="/assets/css/jquery.mCustomScrollbar.css">

  <!-- CSS Front Template -->
  <link rel="stylesheet" href="/assets/css/theme.css">
</head>
<body>
<!-- Search Content -->
<div id="searchSlideDown" class="d-none dropdown-unfold u-search-slide-down" aria-labelledby="searchSlideDownInvoker">
  <form>
    <!-- Input Group -->
    <div class="input-group input-group-borderless u-search-slide-down__input rounded mb-2">
      <div class="input-group-prepend">
        <span class="input-group-text">
          <span class="fas fa-search"></span>
        </span>
      </div>
      <input type="search" class="form-control" placeholder="Search Front" aria-label="Search Front">
      <div class="input-group-append">
        <a class="input-group-text" href="javascript:;"
           aria-label="close"
           data-unfold-event="click"
           data-unfold-hide-on-scroll="false"
           data-unfold-target="#searchSlideDown"
           data-unfold-type="css-animation"
           data-unfold-animation-in="active"
           data-unfold-animation-out="fadeOutUp"
           data-unfold-delay="0"
           data-unfold-duration="800"
           data-unfold-overlay='{
            "className": "u-search-slide-down-bg-overlay",
            "background": "rgba(55, 125, 255, .1)",
            "animationSpeed": 400
           }'>
          <span class="fas fa-times" aria-hidden="true"></span>
        </a>
      </div>
    </div>
    <!-- End Input Group -->

    <!-- Suggestions Content -->
    <div class="rounded bg-white u-search-slide-down__suggestions py-3 px-5">
      <ul class="list-group list-group-flush list-group-borderless mb-0">
        <li><a class="list-group-item list-group-item-action" href="../pages/about-agency.html">About Front</a></li>
        <li><a class="list-group-item list-group-item-action" href="../../starter/index.html">Getting Started</a></li>
        <li><a class="list-group-item list-group-item-action" href="../../documentation/index.html">Documentation</a></li>
      </ul>
    </div>
    <!-- End Suggestions Content -->
  </form>
</div>
<!-- End Search Content -->

<!-- ========== HEADER ========== -->
<header id="header" class="u-header u-header--abs-top-md u-header--bg-transparent u-header--show-hide-md"
        data-header-fix-moment="500"
        data-header-fix-effect="slide">
  <div class="u-header__section">
    <!-- Topbar -->
    <div class="d-none container u-header__hide-content pt-2">
      <div class="d-flex align-items-center">
        <div class="ml-auto">
          <!-- Jump To -->
          <div class="d-none d-inline-block d-sm-none position-relative mr-2">
            <a id="jumpToDropdownInvoker" class="dropdown-nav-link dropdown-toggle d-flex align-items-center" href="javascript:;" role="button"
               aria-controls="jumpToDropdown"
               aria-haspopup="true"
               aria-expanded="false"
               data-unfold-event="hover"
               data-unfold-target="#jumpToDropdown"
               data-unfold-type="css-animation"
               data-unfold-duration="300"
               data-unfold-delay="300"
               data-unfold-hide-on-scroll="true"
               data-unfold-animation-in="slideInUp"
               data-unfold-animation-out="fadeOut">
              Jump to
            </a>

            <div id="jumpToDropdown" class="dropdown-menu dropdown-unfold" aria-labelledby="jumpToDropdownInvoker">
              <a class="dropdown-item" href="../../html/pages/help.html">Help</a>
            </div>
          </div>
          <!-- End Jump To -->

          <!-- Links -->
          <div class="d-none d-sm-inline-block ml-sm-auto">
            <ul class="list-inline mb-0">
              <li class="list-inline-item mr-0">
                <a class="u-header__navbar-link" href="../pages/help.html">Help</a>
              </li>
            </ul>
          </div>
          <!-- End Links -->
        </div>

        <ul class="list-inline ml-2 mb-0">
          <!-- Search -->
          <li class="list-inline-item">
            <a id="searchSlideDownInvoker" class="btn btn-xs btn-icon btn-text-secondary u-search-slide-down-trigger" href="javascript:;" role="button"
               aria-haspopup="true"
               aria-expanded="false"
               aria-controls="searchSlideDown"
               data-unfold-type="css-animation"
               data-unfold-hide-on-scroll="false"
               data-unfold-target="#searchSlideDown"
               data-unfold-animation-in="active"
               data-unfold-animation-out="fadeOutUp"
               data-unfold-delay="0"
               data-unfold-duration="800"
               data-unfold-overlay='{
                "className": "u-search-slide-down-bg-overlay",
                "background": "rgba(55, 125, 255, .1)",
                "animationSpeed": 400
               }'>
              <span class="fas fa-search btn-icon__inner u-search-slide-down-trigger__icon"></span>
            </a>
          </li>
          <!-- End Search -->
        </ul>
      </div>
    </div>
    <!-- End Topbar -->

    <div id="logoAndNav" class="container">
      <!-- Nav -->
      <nav class="js-mega-menu navbar navbar-expand-md u-header__navbar u-header__navbar--no-space">
        <!-- Logo -->
        <a class="navbar-brand u-header__navbar-brand u-header__navbar-brand-center" href="/index.html" aria-label="Front">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="46px" height="46px" viewBox="0 0 250 250" xml:space="preserve" style="margin-bottom: 0; flex: none">
            <style type="text/css">
            	.st0{fill:#F08705;}
            	.st1{fill:#DF6C0C;}
            	.st2{fill:#FFFFFF;}
            </style>
            <path class="st0" d="M237.5,227.9c0,5.3-4.3,9.6-9.5,9.6c0,0,0,0,0,0H22.1c-5.3,0-9.6-4.3-9.6-9.5c0,0,0,0,0,0V22.1
            	c0-5.3,4.3-9.6,9.5-9.6c0,0,0,0,0,0h205.9c5.3,0,9.6,4.3,9.6,9.5c0,0,0,0,0,0V227.9z"/>
            <path class="st1" d="M237.5,227.9c0,5.3-4.3,9.6-9.5,9.6c0,0,0,0,0,0H89.6L44.8,192l27.9-45.5l82.7-102.7l82.1,84.5V227.9z"/>
            <path class="st2" d="M197.1,138.3h-23.7l-25-42.7c5.7-1.2,9.8-6.2,9.7-12V51.5c0-6.8-5.4-12.3-12.2-12.3c0,0-0.1,0-0.1,0h-41.7
            	c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1v32.1c0,5.8,4,10.8,9.7,12l-25,42.7H52.9c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1
            	v32.1c0,6.8,5.4,12.3,12.2,12.3c0,0,0.1,0,0.1,0h41.7c6.8,0,12.3-5.4,12.3-12.2c0,0,0-0.1,0-0.1v-32.1c0-6.8-5.4-12.3-12.2-12.3
            	c0,0-0.1,0-0.1,0h-4l24.8-42.4h19.3l24.9,42.4h-4.1c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1v32.1c0,6.8,5.4,12.3,12.2,12.3
            	c0,0,0.1,0,0.1,0h41.7c6.8,0,12.3-5.4,12.3-12.2c0,0,0-0.1,0-0.1v-32.1c0-6.8-5.4-12.3-12.2-12.3
            	C197.2,138.3,197.2,138.3,197.1,138.3z"/>
          </svg>
          <span class="u-header__navbar-brand-text">diagrams.net</span>
        </a>
        <!-- End Logo -->

        <!-- Responsive Toggle Button -->
        <button type="button" class="navbar-toggler btn u-hamburger"
                aria-label="Toggle navigation"
                aria-expanded="false"
                aria-controls="navBar"
                data-toggle="collapse"
                data-target="#navBar">
          <span id="hamburgerTrigger" class="u-hamburger__box">
            <span class="u-hamburger__inner"></span>
          </span>
        </button>
        <!-- End Responsive Toggle Button -->

        <!-- Navigation -->
        <div id="navBar" class="collapse navbar-collapse u-header__navbar-collapse">
          <ul class="navbar-nav u-header__navbar-nav">
            <!-- Integrations -->
            <li class="d-none nav-item hs-has-sub-menu u-header__nav-item"
                data-event="hover"
                data-animation-in="slideInUp"
                data-animation-out="fadeOut">
              <a id="intMegaMenu" class="nav-link u-header__nav-link u-header__nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-labelledby="pagesSubMenu">Integrations</a>

              <!-- Integrations - Submenu -->
              <ul id="pagesSubMenu" class="hs-sub-menu u-header__sub-menu" aria-labelledby="intMegaMenu" style="min-width: 230px;">
                <!-- Company -->
                <li class="hs-has-sub-menu">
                  <a id="navLinkPagesCompany" class="nav-link u-header__sub-menu-nav-link u-header__sub-menu-nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-controls="navSubmenuPagesCompany">Company</a>

                  <ul id="navSubmenuPagesCompany" class="hs-sub-menu u-header__sub-menu" aria-labelledby="navLinkPagesCompany" style="min-width: 230px;">
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/careers.html">Careers</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/careers-single.html">Careers Single</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/customers.html">Customers</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/customer-story.html">Customer story</a></li>
                  </ul>
                </li>
                <!-- Company -->

                <!-- Portfolio -->
                <li class="hs-has-sub-menu">
                  <a id="navLinkPagesPortfolio" class="nav-link u-header__sub-menu-nav-link u-header__sub-menu-nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-controls="navSubmenuPagesPortfolio">Portfolio</a>

                  <ul id="navSubmenuPagesPortfolio" class="hs-sub-menu u-header__sub-menu" aria-labelledby="navLinkPagesPortfolio" style="min-width: 230px;">
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../portfolio/boxed-classic.html">All layouts</a></li>
                  </ul>
                </li>
                <!-- End Portfolio -->

                <!-- Contacts -->
                <li class="hs-has-sub-menu">
                  <a id="navLinkContactsServices" class="nav-link u-header__sub-menu-nav-link u-header__sub-menu-nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-controls="navSubmenuContactsServices">Contacts</a>

                  <ul id="navSubmenuContactsServices" class="hs-sub-menu u-header__sub-menu" aria-labelledby="navLinkContactsServices" style="min-width: 230px;">
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/contacts-agency.html">Contacts Agency</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/contacts-start-up.html">Contacts Start-Up</a></li>
                  </ul>
                </li>
                <!-- Contacts -->

                <!-- Utilities -->
                <li class="hs-has-sub-menu">
                  <a id="navLinkPagesUtilities" class="nav-link u-header__sub-menu-nav-link u-header__sub-menu-nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-controls="navSubmenuPagesUtilities">Utilities</a>

                  <ul id="navSubmenuPagesUtilities" class="hs-sub-menu u-header__sub-menu" aria-labelledby="navLinkPagesUtilities" style="min-width: 230px;">
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/pricing.html">Pricing</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/faq.html">FAQ</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/terms.html">Terms &amp; Conditions</a></li>
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/privacy.html">Privacy &amp; Policy</a></li>
                  </ul>
                </li>
                <!-- Utilities -->

                <!-- Specialty -->
                <li class="hs-has-sub-menu">
                  <a id="navLinkPagesSpecialty" class="nav-link u-header__sub-menu-nav-link u-header__sub-menu-nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false" aria-controls="navSubmenuPagesSpecialty">Specialty</a>

                  <ul id="navSubmenuPagesSpecialty" class="hs-sub-menu u-header__sub-menu" aria-labelledby="navLinkPagesSpecialty" style="min-width: 230px;">
                    <li><a class="nav-link u-header__sub-menu-nav-link" href="../pages/status.html">Status</a></li>
                  </ul>
                </li>
                <!-- Specialty -->
              </ul>
              <!-- End Integrations - Submenu -->
            </li>
            <!-- End Integrations -->

            <!-- Blog -->
            <li class="nav-item"
                data-event="hover"
                data-animation-in="slideInUp"
                data-animation-out="fadeOut">
              <a id="blogMegaMenu" class="nav-link u-header__nav-link" aria-haspopup="true" aria-expanded="false" aria-labelledby="blogSubMenu" href="/blog">Blog</a>
            </li>
            <!-- End Blog -->

            <!-- Security -->
            <li class="d-none nav-item hs-has-mega-menu u-header__nav-item"
                data-event="hover"
                data-animation-in="slideInUp"
                data-animation-out="fadeOut"
                data-max-width="900px"
                data-position="right">
              <a id="securityMegaMenu" class="nav-link u-header__nav-link u-header__nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false">Security</a>

              <!-- Security - Mega Menu -->
              <div class="hs-mega-menu w-100 u-header__sub-menu" aria-labelledby="securityMegaMenu">
                <div class="row no-gutters">
                  <div class="col-lg-8">
                    <div class="u-header__promo-card-deck">
                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <a class="u-header__promo-link" href="../app-marketplace/index.html">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-45.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title">App Marketplace <span class="badge badge-success badge-pill ml-1">New</span></span>
                              <small class="u-header__promo-text">Marketplace app demo</small>
                            </div>
                          </div>
                        </a>
                      </div>
                      <!-- End Promo Item -->

                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <a class="u-header__promo-link" href="../house/index.html">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-13.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title">House</span>
                              <small class="u-header__promo-text">Real estate demo</small>
                            </div>
                          </div>
                        </a>
                      </div>
                      <!-- End Promo Item -->
                    </div>

                    <div class="u-header__promo-card-deck">
                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <a class="u-header__promo-link" href="../job/index.html">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-19.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title">Job</span>
                              <small class="u-header__promo-text">Job vacancy demo</small>
                            </div>
                          </div>
                        </a>
                      </div>
                      <!-- End Promo Item -->

                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <a class="u-header__promo-link" href="../pages/docs.html">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-4.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title">Help Desk</span>
                              <small class="u-header__promo-text">Help desk</small>
                            </div>
                          </div>
                        </a>
                      </div>
                      <!-- End Promo Item -->
                    </div>

                    <div class="u-header__promo-card-deck">
                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <a class="u-header__promo-link" href="../crypto/index.html">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-5.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title">Crypto Landing</span>
                              <small class="u-header__promo-text">Cryptocurrency demo</small>
                            </div>
                          </div>
                        </a>
                      </div>
                      <!-- End Promo Item -->

                      <!-- Promo Item -->
                      <div class="u-header__promo-card u-header__promo-item">
                        <div class="u-header__promo-link">
                          <div class="media align-items-center">
                            <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-23.svg" alt="SVG">
                            <div class="media-body">
                              <span class="u-header__promo-title text-secondary">New demos</span>
                              <small class="u-header__promo-text">coming soon ...</small>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- End Promo Item -->
                    </div>
                  </div>

                  <!-- Promo -->
                  <div class="col-lg-4 u-header__promo d-none d-lg-block">
                    <a class="d-block u-header__promo-inner" href="#">
                      <div class="position-relative">
                        <!-- <img class="img-fluid rounded mb-3" src="../../assets/img/380x227/img6.jpg" alt="Image Description"> -->
                      </div>
                      <span class="text-secondary font-size-1">Front makes you look at things from a different perspectives.</span>
                    </a>
                  </div>
                  <!-- End Promo -->
                </div>
              </div>
              <!-- End Security - Mega Menu -->
            </li>
            <!-- End Security -->

            <!-- Docs -->
            <li class="d-none nav-item hs-has-mega-menu u-header__nav-item"
                data-event="hover"
                data-animation-in="slideInUp"
                data-animation-out="fadeOut"
                data-max-width="260px"
                data-position="right">
              <a id="docsMegaMenu" class="nav-link u-header__nav-link u-header__nav-link-toggle" href="javascript:;" aria-haspopup="true" aria-expanded="false">Docs</a>

              <!-- Docs - Submenu -->
              <div class="hs-mega-menu u-header__sub-menu" aria-labelledby="docsMegaMenu" style="min-width: 330px;">
                <!-- Promo Item -->
                <div class="u-header__promo-item">
                  <a class="u-header__promo-link" href="../../documentation/index.html">
                    <div class="media align-items-center">
                      <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-2.svg" alt="SVG">
                      <div class="media-body">
                        <span class="u-header__promo-title">
                          Documentation
                          <span class="badge badge-primary badge-pill ml-1">v2.8</span>
                        </span>
                        <small class="u-header__promo-text">Development guides</small>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- End Promo Item -->

                <!-- Promo Item -->
                <div class="u-header__promo-item">
                  <a class="u-header__promo-link" href="../../starter/index.html">
                    <div class="media align-items-center">
                      <img class="js-svg-injector u-header__promo-icon" src="../../assets/svg/icons/icon-1.svg" alt="SVG">
                      <div class="media-body">
                        <span class="u-header__promo-title">Get started</span>
                        <small class="u-header__promo-text">Components and snippets</small>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- End Promo Item -->

                <div class="u-header__promo-footer">
                  <!-- List -->
                  <div class="row no-gutters">
                    <div class="col-6">
                      <div class="u-header__promo-footer-item">
                        <small class="text-muted d-block">Check what's new</small>
                        <a class="small" href="../../documentation/getting-started/changelog.html">
                          Changelog
                        </a>
                      </div>
                    </div>
                    <div class="col-6 u-header__promo-footer-ver-divider">
                      <div class="u-header__promo-footer-item">
                        <small class="text-muted d-block">Have a question?</small>
                        <a class="small" href="http://htmlstream.com/contact-us">
                          Contact us
                        </a>
                      </div>
                    </div>
                  </div>
                  <!-- End List -->
                </div>
              </div>
              <!-- End Docs - Submenu -->
            </li>
            <!-- End Docs -->

            <!-- Button -->
            <li class="nav-item u-header__nav-last-item">
              <a class="btn btn-sm btn-primary transition-3d-hover" href="https://app.diagrams.net/?src=about" target="_blank">
                Start Now
              </a>
            </li>
            <!-- End Button -->
          </ul>
        </div>
        <!-- End Navigation -->
      </nav>
      <!-- End Nav -->
    </div>
  </div>
</header>
<!-- ========== END HEADER ========== -->

<!-- ========== MAIN ========== -->
<main id="content" role="main">
  <!-- Article Description Section -->
  <div class="container space-2 space-top-md-5 space-top-lg-4 space-bottom-lg-3">

    <!-- Breadcrumbs Section -->
    <div class="w-lg-60 mx-lg-auto">
      <div class="mb-4">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb breadcrumb-no-gutter font-size-1">
            <li class="breadcrumb-item"><a href="">Home</a></li>
             
               
                
                    <li class="breadcrumb-item"><a href="/doc/">doc</a></li>
                
              
                
                    <li class="breadcrumb-item"><a href="/doc/faq/">faq</a></li>
                
              
                
                    <li class="breadcrumb-item"><a class="current">Create custom shapes in diagrams.net using the text editor</a></li>
                
              
          </ol>
        </nav>
      </div>
    </div>
    <!-- End Breadcrumbs Section -->

    <div class="w-lg-60 mx-lg-auto">
      <div class="mb-4">
        <h1 class="h2 font-weight-medium">Create custom shapes in diagrams.net using the text editor</h1>
      </div>

      <p>You can create your own custom stencils (shapes) in diagrams.net by describing their geometry, connection points and styles of the components in your stencil in an XML format.</p>

<p>Tip: You can drag a custom stencil from the drawing canvas into your Scratchpad, or to a custom library if you want to save or share your custom shapes. Click <em>File &gt; New Library</em> to create a new custom library.</p>

<h2 id="general-structure">General structure</h2>

<p>The basic diagrams.net stencils use XML. Click <em>Arrange &gt; Insert &gt; Shape</em> to open the <em>Edit Shape</em> dialog where you can see the XML structure of the stencil. Let’s customise this stencil to be a large L with a vertical line inside.</p>

<p><img src="/assets/img/blog/custom-shape-example.png" style="width=100%;max-width:200px;height:auto;" alt="A complex custom shape, created in diagrams.net" /></p>

<p>The top level element is “shape”. So enter:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;shape name="stencilName" h="100" w="50" aspect="variable" strokewidth="inherit"&gt;
&lt;/shape&gt;
</code></pre></div></div>

<p>Its attributes are:</p>
<ul>
  <li><strong><code class="highlighter-rouge">name</code></strong> - stencil name.</li>
  <li><strong><code class="highlighter-rouge">h</code></strong> - height.</li>
  <li><strong><code class="highlighter-rouge">w</code></strong> - width.</li>
  <li><strong><code class="highlighter-rouge">aspect</code></strong> - if “variable”, you can have any aspect ratio. if “fixed”, h and w are fixed to the ratio you defined in h and w.</li>
  <li><strong><code class="highlighter-rouge">strokewidth</code></strong> - “inherit” sets strokewidth to the style you define in the UI. Set it to a positive number and it will be fixed to that width.</li>
</ul>

<p>The shape block can contain three child elements defined in the following order:</p>
<ul>
  <li><strong><code class="highlighter-rouge">&lt;connections&gt;</code></strong> - connection points for edges.</li>
  <li><strong><code class="highlighter-rouge">&lt;background</code>&gt;``</strong> - geometry defined here will have shadows.</li>
  <li><strong><code class="highlighter-rouge">&lt;foreground&gt;</code></strong> - the rest of the geometry.</li>
</ul>

<p>We will deal with connections later.</p>

<p>Let’s create the geometry for the background (the L part of the stencil):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;background&gt;
    &lt;path&gt;
      &lt;move x="0" y="0"/&gt;
      &lt;line x="50" y="0"/&gt;
      &lt;line x="50" y="40"/&gt;
      &lt;line x="100" y="40"/&gt;
      &lt;line x="100" y="50"/&gt;
      &lt;line x="0" y="50"/&gt;
      &lt;close/&gt;
    &lt;/path&gt;
&lt;/background&gt;
</code></pre></div></div>

<p>The coordinate 0, 0 is always the top left point. The bottom right is w, h, so in this case it’s 100, 50.</p>

<p>Now add some foreground geometry (the vertical line inside the L):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;foreground&gt;
    &lt;path&gt;
      &lt;move x="25" y="10"/&gt;
      &lt;line x="25" y="40"/&gt;
    &lt;/path&gt;
&lt;/foreground&gt;
</code></pre></div></div>

<p>Every geometry element has to have a defined stroke. It can be <em>stroke</em>, <em>fill</em> or <em>fillstroke</em>. <em>Stroke</em> is stroke without fill, <em>fill</em> is fill without stroke, and <em>fillstroke</em> is both fill and stroke. First, the geometry should be defined and preferably the next line should be the stroke type.</p>

<p>After all this, our shape should be looking something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;shape name="stencilName" h="50" w="100" aspect="variable" strokewidth="inherit"&gt;
  &lt;background&gt;
    &lt;path&gt;
      &lt;move x="0" y="0"/&gt;
      &lt;line x="50" y="0"/&gt;
      &lt;line x="50" y="40"/&gt;
      &lt;line x="100" y="40"/&gt;
      &lt;line x="100" y="50"/&gt;
      &lt;line x="0" y="50"/&gt;
      &lt;close/&gt;
    &lt;/path&gt;
  &lt;/background&gt;
  &lt;foreground&gt;
    &lt;fillstroke/&gt;
    &lt;path&gt;
      &lt;move x="25" y="10"/&gt;
      &lt;line x="25" y="40"/&gt;
    &lt;/path&gt;
    &lt;stroke/&gt;
  &lt;/foreground&gt;
&lt;/shape&gt;
</code></pre></div></div>

<p>Notice the stroke exception in the case of the background geometry. You don’t define it after the background geometry, but instead as the first line of the foreground block.</p>

<p>Click <em>Preview</em> and you should see:</p>

<p><img src="/assets/img/blog/custom-shape-example-code.png" style="width=100%;max-width:400px;height:auto;" alt="A complex custom shape and its code, created in diagrams.net" /></p>

<h2 id="geometry">Geometry</h2>

<p>There are 4 types of geometry elements:</p>

<ul>
  <li><strong><code class="highlighter-rouge">&lt;rect&gt;</code></strong> - attributes <code class="highlighter-rouge">"x"</code>, <code class="highlighter-rouge">"y"</code>, <code class="highlighter-rouge">"w"</code>, <code class="highlighter-rouge">"h"</code>, all required decimals</li>
  <li><strong><code class="highlighter-rouge">&lt;roundrect&gt;</code></strong> - attributes <code class="highlighter-rouge">"x"</code>, <code class="highlighter-rouge">"y"</code>, <code class="highlighter-rouge">"w"</code>, <code class="highlighter-rouge">"h"</code>, all required decimals. Also <code class="highlighter-rouge">"arcsize"</code> is an optional decimal attribute defining how large the corner curves are.</li>
  <li><strong><code class="highlighter-rouge">&lt;ellipse&gt;</code></strong> - attributes <code class="highlighter-rouge">"x"</code>, <code class="highlighter-rouge">"y"</code>, <code class="highlighter-rouge">"w"</code>, <code class="highlighter-rouge">"h"</code>, all required decimals.</li>
  <li><strong><code class="highlighter-rouge">&lt;path&gt;</code></strong> - a general case of geometry, used for more complex shapes.</li>
</ul>

<p>Path is a similar structure as path in SVG. It should start with a <code class="highlighter-rouge">&lt;move&gt;</code> where <code class="highlighter-rouge">"x"</code> and <code class="highlighter-rouge">"y"</code> define the coordinate. After move, an arbitrary number of geometry elements should follow.</p>

<p>Path elements can be:</p>
<ul>
  <li><strong><code class="highlighter-rouge">&lt;move&gt;</code></strong> - to attributes required decimals <code class="highlighter-rouge">(x,y)</code>.</li>
  <li><strong><code class="highlighter-rouge">&lt;line&gt;</code></strong> - to attributes required decimals <code class="highlighter-rouge">(x,y)</code>.</li>
  <li><strong><code class="highlighter-rouge">&lt;quad&gt;</code></strong> - to required decimals <code class="highlighter-rouge">(x2,y2)</code> via control point required decimals <code class="highlighter-rouge">(x1,y1)</code>.</li>
  <li><strong><code class="highlighter-rouge">&lt;curve&gt;</code></strong> - to required decimals <code class="highlighter-rouge">(x3,y3)</code>, via control points required decimals <code class="highlighter-rouge">(x1,y1)</code> and <code class="highlighter-rouge">(x2,y2)</code>.</li>
  <li><strong><code class="highlighter-rouge">&lt;arc&gt;</code></strong> - this doesn’t follow the HTML Canvas signatures, instead it’s a copy of the SVG arc command. The <a href="http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands">SVG specification</a> gives the best description of its behaviours. The attributes are named identically, they are decimals and all required.</li>
  <li><strong><code class="highlighter-rouge">&lt;close&gt;</code></strong> ends the current subpath and causes an automatic straight line to be drawn from the current point to the last move point of the current subpath.</li>
</ul>

<p>When the subpath is finished, there are two options. The first is to finish it with <code class="highlighter-rouge">&lt;/path&gt;</code>, which makes is visually open. The second option is to use <code class="highlighter-rouge">&lt;close&gt;</code> and then <code class="highlighter-rouge">&lt;/path&gt;</code>, which will close the current subpath. A subpath is a segment which starts with a <code class="highlighter-rouge">&lt;move&gt;</code> and ends with a <code class="highlighter-rouge">&lt;close&gt;</code> or another <code class="highlighter-rouge">&lt;move&gt;</code>. A single <code class="highlighter-rouge">&lt;path&gt;</code> can contain multiple subpaths, but all of them will use the same style. And if they overlap, the same fill rule applies as for SVG.</p>

<p>The first element of geometry will use the shadow style if needed, but the rest will not.</p>

<h2 id="connections">Connections</h2>

<p>The <code class="highlighter-rouge">&lt;connections&gt;</code> element defines the connection points of the stencil, where edges can be connected.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;connections&gt;
    &lt;constraint x="0.5" y="0"/&gt;
    &lt;constraint x="0.5" y="1"/&gt;
    &lt;constraint x="0" y="0.5"/&gt;
    &lt;constraint x="1" y="0.8"/&gt;
&lt;/connections&gt;
</code></pre></div></div>

<p>This adds four connection points at the corresponding coordinates. Note the coordinates are relative. <code class="highlighter-rouge">x=0</code> is <code class="highlighter-rouge">0</code>, <code class="highlighter-rouge">x=1</code> is full width. Same for <code class="highlighter-rouge">y</code>.</p>

<p>When you hover over the unselected shape, connection points appear as a small <code class="highlighter-rouge">x</code>. Drag edges from these connection points or via the blue arrows.</p>

<p><img src="/assets/img/blog/custom-shape-example-connection-points.png" style="width=100%;max-width:200px;height:auto;" alt="Connection points have been added to the custom shape" /></p>

<h2 id="style">Style</h2>

<p>Style functions similar to the SVG style specification. Until you have defined a specific style, the style applied to the stencil will be in effect.</p>

<p>Style types are:</p>

<ul>
  <li><strong><code class="highlighter-rouge">alpha</code></strong> - defines the alpha level, the opposite of transparency. Attribute is <em>alpha</em> and range is <code class="highlighter-rouge">0-1</code>, decimal. <code class="highlighter-rouge">0</code> being fully transparent and <code class="highlighter-rouge">1</code> being solid.</li>
  <li><strong><code class="highlighter-rouge">strokewidth</code></strong> - defines the stroke width in pixels. Attributes are <em>width</em> which is decimal and <em>fixed</em> which is optional, default <code class="highlighter-rouge">0</code> being scaling with resize and <code class="highlighter-rouge">1</code> for a fixed stroke width regardless of scaling.
dashed - toggles the dashed line style. Attribute is <em>dashed</em>. <code class="highlighter-rouge">0</code> for solid line, <code class="highlighter-rouge">1</code> for dashed.</li>
  <li><strong><code class="highlighter-rouge">dashpattern</code></strong> - defines a custom dashed line style. Attribute is <em>pattern</em> and is an array. The numbers in the array define for how many points there is a line, how many points for a pause, then how many points for a line again, and so on. Imagine the numbers as on/off alternating until the end of the array and then starting over. So <code class="highlighter-rouge">&lt;dashpattern pattern="5 1 8 1"/&gt;</code> defines a line length 5, pause of 1, even longer line of 8, another pause of 1 and then starting over.</li>
  <li><strong><code class="highlighter-rouge">miterlimit</code></strong> - same as in SVG. Attribute is <em>limit</em>, a decimal number. It defines the “edginess” of line joins. The larger the number, the bigger spikes are allowed on sharp joins. The <em>limit</em> attribute defines the cutoff amount for spikes.</li>
  <li><strong><code class="highlighter-rouge">linejoin</code></strong> - defines the type of line joining. Attribute is <em>join</em> and can be <em>miter</em>, <em>round</em> or <em>bevel</em>, same as in SVG. Default is <em>miter</em>, and it produces straight sharp edges. <em>Round</em> as the name says gives rounded joins. <em>Bevel</em> is the middle solution, as it produces “rounded” joins, but instead a curve, a straight line.</li>
  <li><strong><code class="highlighter-rouge">linecap</code></strong> - defines the type of line end. Attribute is <em>cap</em> and can be <em>flat</em>, <em>square</em> or <em>round</em>, same as in SVG. Default is <em>flat</em>, and it produces a square edge right at the end of the line. <em>Round</em> as the name says gives rounded ending, after the line end, so the line is a bit longer. <em>Square</em> is the middle solution, as it produces “rounded” ends, but instead a circular curve, with a squared straight line at the end.</li>
</ul>

<p>There are some more style that are related to text.</p>

<h2 id="text">Text</h2>

<p>Text is added using the text element. You can add text to the foreground or background (before <code class="highlighter-rouge">&lt;/foreground&gt;</code> or <code class="highlighter-rouge">&lt;/background&gt;</code>, but be aware that background text may be hidden by foreground elements, especially those that are filled. Text uses the following format:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;text str="someText" x="50.0" y="50.0" align="left" valign="top" vertical="0" rotation="0.0" align-shape="1"/&gt;
</code></pre></div></div>

<p>Required attributes are <em>str</em>, <em>x</em> and <em>y</em>. <em>Align</em>, <em>valign</em>, <em>localized</em>, <em>vertical</em>, <em>rotation</em> and <em>align-shape</em> are all optional.</p>
<ul>
  <li><strong><code class="highlighter-rouge">str</code></strong> - defines the actual text the stencil will include and is a string. <em>x</em> and <em>y</em> are label coordinates and use a decimal value.</li>
  <li><strong><code class="highlighter-rouge">align</code></strong> - defines the horizontal alignment and its self-descriptive values are: <em>left</em>, <em>center</em> and <em>right</em>.</li>
  <li><strong><code class="highlighter-rouge">valign</code></strong> -defines the vertical alignment. Its possible values are <em>top</em>, <em>middle</em> and <em>bottom</em>.</li>
  <li><strong><code class="highlighter-rouge">vertical</code></strong> - <code class="highlighter-rouge">1</code> for text that is rendered vertically, <code class="highlighter-rouge">0</code> (default) for horizontal text.</li>
  <li><strong><code class="highlighter-rouge">rotation</code></strong> - defines the text rotation and is in the range of <code class="highlighter-rouge">0.0-360.0</code>.</li>
  <li><strong><code class="highlighter-rouge">align-shape</code></strong> - <code class="highlighter-rouge">1</code> for a text label that rotates with the shape, <code class="highlighter-rouge">0</code> for a fixed text label.</li>
</ul>

<p>The styles related to text are:</p>
<ul>
  <li><strong><code class="highlighter-rouge">fontsize</code></strong> - attribute is <em>size</em> and is a decimal value. Defines font size.</li>
  <li><strong><code class="highlighter-rouge">fontstyle</code></strong> - attribute is <em>style</em> and is an ORed bit pattern of bold (<code class="highlighter-rouge">1</code>), italic (<code class="highlighter-rouge">2</code>) and underline (<code class="highlighter-rouge">4</code>), i.e. bold underline is <code class="highlighter-rouge">"5"</code></li>
  <li><strong><code class="highlighter-rouge">fontfamily</code></strong> - attribute is <em>family</em> and is a string defining the type face to be used.</li>
</ul>

<p>After adding the text to the custom shape, as well as the connectors, click <em>Preview</em>.</p>

<p><img src="/assets/img/blog/custom-shape-example-styled-text.png" style="width=100%;max-width:400px;height:auto;" alt="Text has been added to the custom shape" /></p>

<h2 id="using-style">Using style</h2>

<p>Unless you defined a style inside the stencil, it will use the default style that is applied to it. In the case of the above example, you can change the <em>fillcolor</em> and <em>strokecolor</em> and it will affect the whole stencil.</p>

<p>Let’s say we want to keep the behaviour of the outline stroke (it changes as we change the <em>strokecolor</em> in the UI), but we want that vertical line to always be white. Lets call the outline geometry <code class="highlighter-rouge">&lt;path1&gt;</code> and the vertical line <code class="highlighter-rouge">&lt;path2&gt;</code>. We should do conceptually something like this:</p>

<p>metacode</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;path1&gt;
  &lt;fillstroke/&gt;
  &lt;strokecolor color="#ffffff"/&gt;
&lt;path2/&gt;
  &lt;stroke/&gt;
</code></pre></div></div>

<p>Now assume we have another line we will call <code class="highlighter-rouge">&lt;path3&gt;</code> which is declared after <code class="highlighter-rouge">&lt;path2&gt;</code> and we want it to have the default stroke color. Since we already defined <em>strokecolor</em> to be white, we need a mechanism to undo this. For this reason the format has a stack mechanism. By entering a <code class="highlighter-rouge">&lt;save/&gt;</code> element, we save the current style on the stack. If we use a <code class="highlighter-rouge">&lt;restore/&gt;</code> later, we reset the current style to the last save that is in the stack. The stack uses the standard LIFO (last in, first out) structure.</p>

<p>metacode</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;save/&gt;               //saving all the styles here, which are unchanged, so the default ones
  &lt;path1&gt;
    &lt;fillstroke/&gt;     //use default fill and stroke
    &lt;strokecolor color="#ffffff"/&gt;
  &lt;path2&gt;
    &lt;stroke/&gt;         //use white stroke, if it was fillstroke, white stroke and default fill color would be used
&lt;restore/&gt;            // we restore the last saved state, which in this case contains the default styles
  &lt;path3&gt;
    &lt;stroke/&gt;         //uses the same stroke color as the first time (the white fill got overwritten in the meantime)
</code></pre></div></div>

<p>The number of <code class="highlighter-rouge">&lt;save/&gt;</code> and <code class="highlighter-rouge">&lt;restore/&gt;</code> elements should match.</p>

<p>As an example, let’s change our L shape to include two lines in the foreground : the first vertical line is grey, and the second one is back to the default stroke colour.</p>

<p><img src="/assets/img/blog/custom-shape-example-style-stack.png" style="width=100%;max-width:400px;height:auto;" alt="Adding style to a custom shape using the stack" /></p>


    </div>
  </div>
  <!-- End Article Description Section -->
</main>
<!-- ========== END MAIN ========== -->

<!-- JS Global Compulsory -->
<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/jquery-migrate.min.js"></script>
<script src="../../assets/js/popper.min.js"></script>
<script src="../../assets/js/bootstrap.min.js"></script>

<!-- JS Implementing Plugins -->
<script src="../../assets/js/hs.megamenu.js"></script>

<!-- JS Front -->
<script src="../../assets/js/hs.core.js"></script>
<script src="../../assets/js/hs.header.js"></script>
<script src="../../assets/js/hs.unfold.js"></script>
<script src="../../assets/js/hs.focus-state.js"></script>
<script src="../../assets/js/hs.show-animation.js"></script>

<!-- JS Plugins Init. -->
<script>
  $(window).on('load', function () {
    // initialization of HSMegaMenu component
    $('.js-mega-menu').HSMegaMenu({
      event: 'hover',
      pageContainer: $('.container'),
      breakpoint: 767.98,
      hideTimeOut: 0
    });
  });

  $(document).on('ready', function () {
    // initialization of header
    $.HSCore.components.HSHeader.init($('#header'));

    // initialization of unfold component
    $.HSCore.components.HSUnfold.init($('[data-unfold-target]'), {
      afterOpen: function () {
        $(this).find('input[type="search"]').focus();
      }
    });

    // initialization of show animations
    $.HSCore.components.HSShowAnimation.init('.js-animation-link');

    // initialization of forms
    $.HSCore.components.HSFocusState.init();
  });
</script>

<!-- ========== FOOTER ========== -->
<footer class="bg-dark">
  <div class="container space-2">
    <div class="row mb-7">
      <div class="col-lg-4 mb-5 mb-lg-0">
        <a class="d-inline-flex align-items-center mb-2" href="/index.html" aria-label="Front">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="36px" height="36px" viewBox="0 0 250 250" xml:space="preserve" style="margin-bottom: 0;">
            <style type="text/css">
            	.st0{fill:#F08705;}
            	.st1{fill:#DF6C0C;}
            	.st2{fill:#FFFFFF;}
            </style>
            <path class="st0" d="M237.5,227.9c0,5.3-4.3,9.6-9.5,9.6c0,0,0,0,0,0H22.1c-5.3,0-9.6-4.3-9.6-9.5c0,0,0,0,0,0V22.1
            	c0-5.3,4.3-9.6,9.5-9.6c0,0,0,0,0,0h205.9c5.3,0,9.6,4.3,9.6,9.5c0,0,0,0,0,0V227.9z"/>
            <path class="st1" d="M237.5,227.9c0,5.3-4.3,9.6-9.5,9.6c0,0,0,0,0,0H89.6L44.8,192l27.9-45.5l82.7-102.7l82.1,84.5V227.9z"/>
            <path class="st2" d="M197.1,138.3h-23.7l-25-42.7c5.7-1.2,9.8-6.2,9.7-12V51.5c0-6.8-5.4-12.3-12.2-12.3c0,0-0.1,0-0.1,0h-41.7
            	c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1v32.1c0,5.8,4,10.8,9.7,12l-25,42.7H52.9c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1
            	v32.1c0,6.8,5.4,12.3,12.2,12.3c0,0,0.1,0,0.1,0h41.7c6.8,0,12.3-5.4,12.3-12.2c0,0,0-0.1,0-0.1v-32.1c0-6.8-5.4-12.3-12.2-12.3
            	c0,0-0.1,0-0.1,0h-4l24.8-42.4h19.3l24.9,42.4h-4.1c-6.8,0-12.3,5.4-12.3,12.2c0,0,0,0.1,0,0.1v32.1c0,6.8,5.4,12.3,12.2,12.3
            	c0,0,0.1,0,0.1,0h41.7c6.8,0,12.3-5.4,12.3-12.2c0,0,0-0.1,0-0.1v-32.1c0-6.8-5.4-12.3-12.2-12.3
            	C197.2,138.3,197.2,138.3,197.1,138.3z"/>
          </svg>
          <span class="brand brand-light">diagrams.net</span>
        </a>
      </div>

      <div class="col-6 col-lg-2 mb-5 mb-lg-0">
        <h4 class="h6 text-white font-weight-medium">Help and advice</h4>
        <ul class="list-unstyled font-size-1">
          <li class="py-2"><a class="text-white-70" href="/doc/">Getting started</a></li>
          <li class="py-2"><a class="text-white-70" href="/integrations.html">Integrations</a></li>
          <li class="py-2"><a class="text-white-70" href="/doc/">Documentation</a></li>
          <li class="py-2"><a class="text-white-70" href="/doc/faq/">FAQ</a></li>
        </ul>
      </div>

      <div class="col-6 col-lg-2 mb-5 mb-lg-0">
        <h4 class="h6 text-white font-weight-medium">About us</h4>
        <ul class="list-unstyled font-size-1">
          <li class="py-2"><a class="text-white-70" href="/about.html">About diagrams.net</a></li>
          <li class="py-2"><a class="text-white-70" href="https://github.com/jgraph">Contribute</a></li>
          <li class="py-2"><a class="text-white-70" href="/trust/">Legal &amp; Privacy</a></li>
        </ul>
      </div>

      <div class="col-lg-4">
        <!-- Form -->
        <form class="js-validate mb-2">
          <h4 class="h6 text-white font-weight-medium mb-3">We ran out of footer items</h4>
          <div class="form-row">
            <div class="col-12">
              <div class="js-form-message">
                <label class="sr-only" for="subscribeSrEmail">Email address</label>
                <div class="input-group">
                  <input type="email" class="form-control" name="email" id="subscribeSrEmail" placeholder="Email address" aria-label="Email address" required
                         data-msg="Please enter a valid email address."
                         data-error-class="u-has-error"
                         data-success-class="u-has-success">
                  <div class="input-group-append">
                    <button type="button" class="btn btn-primary">
                      <span class="fas fa-arrow-right"></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
        <!-- End Form -->

        <p class="text-white-70 small mb-0">This form isn't even posted to a server.</p>
      </div>
    </div>

    <p class="small text-white-70 mb-0">&copy; 2005-2020 diagrams.net. All rights reserved.</p>
  </div>
</footer>
<!-- ========== END FOOTER ========== -->

<body>
</html>
